
# 网页切水果游戏 (Gesture-Controlled Fruit Cutting Web Game)

## 项目介绍
本项目是一款基于计算机视觉+Web技术实现的手势控制切水果网页游戏，通过设备摄像头捕捉用户手指轨迹模拟切割动作，还原经典切水果核心玩法，兼具交互性、趣味性与技术演示价值。游戏支持实时手势追踪、动态水果生成、碰撞检测、游戏状态管理等核心功能，适配主流浏览器及带摄像头的设备。

## 功能特性
- **实时手势追踪**：基于MediaPipe识别食指指尖位置，将其作为“切割工具”轨迹参考点，实现手势与游戏操作的实时映射；
- **动态物品生成**：随机生成普通水果（苹果、香蕉等）、炸弹、特殊水果，物品沿抛物线轨迹运动并伴随旋转效果；
- **碰撞检测与反馈**：实时计算手势轨迹与物品的碰撞，切割水果触发拆分动画+分数反馈，触碰炸弹扣除生命值；
- **游戏状态管理**：包含分数计算（基础分+连击奖励）、生命值管理、连击系统、特殊效果（冻结/加速等），生命值为0时游戏结束；
- **交互界面**：可视化游戏界面，实时展示分数、生命值、连击数、特殊效果状态，支持游戏重置功能；
- **多端适配**：兼容Chrome/Firefox等现代浏览器，适配不同尺寸屏幕的摄像头设备。

## 技术栈
### 核心语言
- 后端：Python 3.7+（逻辑处理、手势识别）
- 前端：JavaScript/HTML5/CSS3（界面渲染、交互）

### 后端框架/库
- Flask：轻量级Web框架，搭建服务并处理HTTP请求
- Flask-SocketIO：实现WebSocket通信，支持前后端实时数据交互
- MediaPipe：手部关键点检测，实现手势识别
- OpenCV：处理摄像头视频帧（解码、格式转换、翻转等）
- NumPy：数值计算，支持碰撞检测中的向量运算
- UUID：生成游戏物品唯一标识，保证前后端数据同步

### 前端技术
- HTML5 Canvas：绘制游戏场景、物品、手势轨迹
- JavaScript：处理前端逻辑（视频采集、Socket通信、画面渲染）
- CSS3：界面美化、响应式布局

## 快速开始
### 环境要求
- 系统：Windows/macOS/Linux（支持Python运行）
- 浏览器：Chrome/Firefox/Edge（最新版，支持HTML5 Canvas和WebSocket）
- 硬件：带网络摄像头的设备（笔记本/台式机+外接摄像头）
- 依赖：Python 3.7及以上版本

### 安装与运行
1. 克隆/下载项目代码至本地
2. 安装依赖库：
   ```bash
   pip install flask flask-socketio opencv-python mediapipe numpy eventlet uuid
   ```
3. 启动服务：
   ```bash
   python app.py
   ```
4. 访问游戏：打开浏览器，输入 `http://127.0.0.1:5000`，授权摄像头权限后即可开始游戏。

## 游戏操作说明
1. 授权摄像头权限后，界面将显示摄像头画面及游戏元素；
2. 移动手部在摄像头前，界面实时追踪食指指尖位置（模拟“刀刃”）；
3. 快速滑动手指切割屏幕中出现的水果，触发切割动画并累计分数；
4. 避免切割炸弹（扣除生命值），生命值为0时游戏结束；
5. 点击“Reset Game”按钮可重置游戏状态（分数、生命值、物品等恢复初始值）；
6. 切割特殊水果可触发特殊效果（如物品减速/加速），界面实时显示效果状态。

## 项目结构
```
fruit-cutting-game/
├── app.py               # 后端主程序（Flask服务、手势识别、游戏逻辑）
├── config.py            # 游戏配置（画布尺寸、物品速度、生成频率等）
├── templates/           # 前端页面模板
│   └── index.html       # 游戏主页面
├── static/              # 静态资源
│   ├── images/          # 游戏素材（水果/炸弹图片、切割效果图）
│   ├── css/             # 样式文件
│   └── js/              # 前端脚本（视频采集、Socket通信、渲染）
└── README.md            # 项目说明文档
```

## 测试说明
### 单元测试
- 物品类测试：验证GameItem及其子类（Fruit/Bomb/SpecialFruit）的属性初始化、位置更新等方法；
- 碰撞检测测试：模拟不同手势轨迹与物品位置，验证碰撞判断逻辑准确性；
- 状态测试：测试连击计算、分数累加、生命值变更、特殊效果触发的逻辑正确性。

### 集成测试
- 前后端通信测试：验证视频帧传输、手势数据解析、游戏状态推送的实时性/准确性；
- 模块协作测试：验证手势识别、物品生成、碰撞处理、状态更新的协同工作效果。

### 性能测试
- 帧率监测：在不同配置设备上运行，确保游戏画面帧率≥24fps（无明显卡顿）；
- 稳定性测试：连续运行游戏30分钟以上，验证无内存泄漏、崩溃或逻辑异常。

## 部署说明
1. 目标服务器安装Python 3.7+及项目依赖库；
2. 开放服务器端口（默认5000），确保网络环境可访问；
3. 上传项目文件至服务器，确认static/images目录包含完整素材；
4. 修改config.py调整游戏参数（根据服务器性能适配）；
5. 启动服务：
   - 前台运行：`python app.py`
   - 后台运行（Linux）：`nohup python app.py > game.log 2>&1 &`
6. 局域网访问：`http://[服务器IP]:5000`；公网访问需配置端口映射/域名解析。

## 常见问题
1. **摄像头授权失败**：检查浏览器摄像头权限设置，确保设备摄像头未被其他程序占用；
2. **手势追踪不灵敏**：调整光线环境（避免过暗/过亮），确保手部在摄像头画面中清晰可见；
3. **游戏卡顿**：降低config.py中物品生成频率/速度，或关闭浏览器多余标签页；
4. **Socket通信异常**：检查服务器端口是否开放，确保eventlet库版本兼容Flask-SocketIO；
5. **素材加载失败**：确认static/images目录下文件路径与config.py配置一致。

## 许可证
本项目为学习/演示用途开源，禁止用于商业盈利场景，可自由修改、分发。
```

### 总结
1. 这份README完全匹配你之前提供的切水果游戏技术栈和功能逻辑，涵盖项目介绍、功能、技术栈、快速开始、操作、结构、测试、部署等标准化模块；
2. 内容格式为标准Markdown，可直接复制粘贴到README.md文件中使用，无需额外调整；
3. 关键操作步骤（安装、运行、部署）提供了可直接执行的命令，测试和问题排查部分贴合项目实际场景，实用性强。
